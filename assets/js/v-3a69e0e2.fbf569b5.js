"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[907],{1705:(e,r,n)=>{n.r(r),n.d(r,{data:()=>a});const a={key:"v-3a69e0e2",path:"/issue/%E4%BB%A3%E7%A0%81%E5%9D%97%E4%B8%8D%E8%A7%84%E8%8C%83%E8%A7%A3%E5%86%B3.html",title:"报TypeError: Invalid value used as weak map key错误，解决方法",lang:"en-US",frontmatter:{date:"2022/1/19 20:12"},excerpt:"",headers:[],git:{updatedTime:1658732501e3,contributors:[{name:"qsyyke",email:"2291308094@qq.com",commits:1}]}}},3191:(e,r,n)=>{n.r(r),n.d(r,{default:()=>D});var a=n(6252);const s=(0,a.uE)('<h1 id="报typeerror-invalid-value-used-as-weak-map-key错误-解决方法" tabindex="-1"><a class="header-anchor" href="#报typeerror-invalid-value-used-as-weak-map-key错误-解决方法" aria-hidden="true">#</a> 报TypeError: Invalid value used as weak map key错误，解决方法</h1><p>如果你在运行<code>npm run build</code>命令的时候，报下面错误，导致<code>build</code>失败</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>✖ Rendering pages - failed\nTypeError: Invalid value used as weak map key\n    at WeakMap.set (&lt;anonymous&gt;)\n    at normalizePropsOptions (D:\\theme-aurora\\aurora-docs\\node_modules\\@vue\\runtime-core\\dist\\runtime-core.cjs.prod.js:2166:15)\n    at createComponentInstance (D:\\theme-aurora\\aurora-docs\\node_modules\\@vue\\runtime-core\\dist\\runtime-core.cjs.prod.js:5026:23)\n    at renderComponentVNode (D:\\theme-aurora\\aurora-docs\\node_modules\\@vue\\server-renderer\\dist\\server-renderer.cjs.prod.js:194:22)\n    at ssrRenderComponent (D:\\theme-aurora\\aurora-docs\\node_modules\\@vue\\server-renderer\\dist\\server-renderer.cjs.prod.js:620:12)\n    at ssrRender (D:\\theme-aurora\\aurora-docs\\docs\\.vuepress\\dist\\.server\\907.app.js:56:47)\n    at renderComponentSubTree (D:\\theme-aurora\\aurora-docs\\node_modules\\@vue\\server-renderer\\dist\\server-renderer.cjs.prod.js:260:13)\n    at renderComponentVNode (D:\\theme-aurora\\aurora-docs\\node_modules\\@vue\\server-renderer\\dist\\server-renderer.cjs.prod.js:211:16)\n    at renderVNode (D:\\theme-aurora\\aurora-docs\\node_modules\\@vue\\server-renderer\\dist\\server-renderer.cjs.prod.js:301:22)\n    at renderComponentSubTree (D:\\theme-aurora\\aurora-docs\\node_modules\\@vue\\server-renderer\\dist\\server-renderer.cjs.prod.js:266:13)\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>这是因为在某个地方出现代码块不规范造成的，可能是以下原因，你需要都检查一下</p>',4),l=(0,a._)("p",null,[(0,a._)("code",null,"config.js"),(0,a.Uk)("文件中未使用"),(0,a._)("code",null,"vuepress-plugin-coze"),(0,a.Uk)("和"),(0,a._)("code",null,"vuepress-plugin-archive"),(0,a.Uk)("插件，因为在主题中，需要这两个插件提供的组件，如果没有使用这两个插件，也会导致主题中，代码块不规范，因为"),(0,a._)("code",null,"html"),(0,a.Uk)("标签不存在，非法使用不存在的标签")],-1),o=(0,a.Uk)("解决方法就是在"),u=(0,a._)("code",null,"config.js",-1),d=(0,a.Uk)("文件中，使用这两个插件，"),t={href:"https://aurora.xcye.xyz/plugin/coze/",target:"_blank",rel:"noopener noreferrer"},p=(0,a.Uk)("vuepress-plugin-coze配置"),i=(0,a.Uk)("，"),c={href:"https://aurora.xcye.xyz/plugin/archive/",target:"_blank",rel:"noopener noreferrer"},m=(0,a.Uk)("vuepress-plugin-archive"),_=(0,a.Uk)("如果你已经使用了这两个插件，那就看下一个造成的来源"),k=(0,a.Uk)("可能是因为你使用了"),v=(0,a._)("code",null,"markdown-it-mathjax3",-1),g=(0,a.Uk)("插件，这个也会造成，可以看此"),b={href:"https://github.com/vuepress/vuepress-next/issues/633",target:"_blank",rel:"noopener noreferrer"},h=(0,a.Uk)("issue"),y=(0,a.Uk)("，如果你在config.js文件中，未配置过此"),U=(0,a._)("code",null,"markdown-it",-1),f=(0,a.Uk)("插件，那就不是这个造成的"),j=(0,a._)("li",null,[(0,a._)("p",null,"多数时候都是因为你md文件中，代码块不规范造成的，比如下面我们某个md文件的部分内容如下"),(0,a._)("p",null,[(0,a._)("code",null,'<font color="red">测试字段</font>')]),(0,a._)("p",null,[(0,a.Uk)("是的，因为"),(0,a._)("code",null,"font"),(0,a.Uk)("标签在"),(0,a._)("code",null,"HTML 4.01"),(0,a.Uk)("中就已经废弃，在"),(0,a._)("code",null,"HTML5"),(0,a.Uk)("不支持，所以就会导致标签使用不规范，在运行"),(0,a._)("code",null,"npm run build"),(0,a.Uk)("的时候，就会抛出"),(0,a._)("code",null,"TypeError: Invalid value used as weak map key"),(0,a.Uk)("异常")]),(0,a._)("p",null,"解决方法"),(0,a._)("ol",null,[(0,a._)("li",null,[(0,a._)("p",null,"打开文件，定位到对应报错来源处"),(0,a._)("p",null,[(0,a._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"",originSrc:"https://picture.xcye.xyz/image-20220119203517580.png",data:"aurora"})])]),(0,a._)("li",null,[(0,a._)("p",null,"找来源md文件"),(0,a._)("p",null,[(0,a._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"",originSrc:"https://picture.xcye.xyz/image-20220119203717870.png",data:"aurora"})])]),(0,a._)("li",null,[(0,a._)("p",null,"修改"),(0,a._)("p",null,[(0,a._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"",originSrc:"https://picture.xcye.xyz/image-20220119203913224.png",data:"aurora"})]),(0,a._)("p",null,[(0,a.Uk)("因为"),(0,a._)("code",null,"font"),(0,a.Uk)("标签已经不能使用了，你需要删除该"),(0,a._)("code",null,"<font>"),(0,a.Uk)("标签，然后重新运行"),(0,a._)("code",null,"npm run build"),(0,a.Uk)("命令便可以了，如果一下还是遇到相同的报错，解决方法还是一样的")])])])],-1),x=(0,a._)("p",null,[(0,a.Uk)("运行"),(0,a._)("code",null,"npm run build"),(0,a.Uk)("命令，一定要出现下图这样，才算正常")],-1),z=(0,a._)("p",null,[(0,a._)("img",{src:"https://ooszy.cco.vin/img/blog-public/ljz.gif",alt:"",originSrc:"https://picture.xcye.xyz/image-20220119204238341.png",data:"aurora"})],-1),E={},D=(0,n(3744).Z)(E,[["render",function(e,r){const n=(0,a.up)("ExternalLinkIcon");return(0,a.wg)(),(0,a.iD)(a.HY,null,[s,(0,a._)("ol",null,[(0,a._)("li",null,[l,(0,a._)("blockquote",null,[(0,a._)("p",null,[o,u,d,(0,a._)("a",t,[p,(0,a.Wm)(n)]),i,(0,a._)("a",c,[m,(0,a.Wm)(n)]),_])])]),(0,a._)("li",null,[(0,a._)("p",null,[k,v,g,(0,a._)("a",b,[h,(0,a.Wm)(n)]),y,U,f])]),j]),x,z],64)}]])}}]);